<div class="alert alert-danger alert-dismissible" role="alert" ng-if="error">Login failed! {{ error.message }}</div>

<!--Navbar-->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand">
                <img class="logo_navbar" src="images_stagee/Stagee_logoridotto.png">
            </a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li class="active"><a href="#!/bachecaView"><span class="glyphicon glyphicon-home"></span></a></li>
                <li><a href="#!/profiloView/{{userId}}"><span class="glyphicon glyphicon-user"></span></a></li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="#" onclick="event.preventDefault();" data-target="#modalnotifiche"
                       data-toggle="modal"><span class="glyphicon glyphicon-bell"></span> </a></li>
                <li class="dropdown">
                    <a href="#" onclick="event.preventDefault();" class="dropdown-toggle" data-toggle="dropdown"
                       role="button" aria-haspopup="true" aria-expanded="false"> <span
                            class="glyphicon glyphicon-cog"></span></a>
                    <ul class="dropdown-menu">
                        <li><a href="#" onclick="event.preventDefault();">Privacy</a></li>
                        <li><a href="#" onclick="event.preventDefault();" data-target="#myModal" data-toggle="modal">Filtri</a>
                        </li>
                        <li><a href="#" onclick="event.preventDefault();" ng-click="logout()">Logout</a></li>
                    </ul>
                </li>
                <li><a href="#!/chat" onclick="event.preventDefault();"><span
                        class="glyphicon glyphicon-comment"></span></a></li>
                </li>
            </ul>
        </div>
    </div>
</nav>

<!--Notifiche-->
<meta name="viewport" content="width=device-width, initial-scale=1">
<div class="modal fade" id="modalnotifiche">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Ricordati di valutare l'evento a cui hai partecipato!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-header">
                <h5 class="modal-title">Tre persone hanno cominciato a seguirti</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-header">
                <h5 class="modal-title">Hai due eventi suggeriti </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </div>
</div>
<!-- Popup Filtri-->
<form id="frmProfilo" role="form" ng-submit="signIn()">
    <div class="modal fade" id="myModal">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Filtri</h5>

                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>

                </div>
                <div class="modal-body" id="pagina_filtri">
                    <div class="containerfiltri">
                        <div class="row">
                            <div class="col-sm-4"
                                 style="border-right: 1px; border-right-style: solid; border-right-color: silver">
                                <ul class="filtri">
                                    <li id="areageografica"><a href="#" onclick="event.preventDefault();"
                                                               ng-click="redirectToAreageografica()">Area geografica</a>
                                    </li>
                                    <li id="ambito"><a href="#" onclick="event.preventDefault();"
                                                       ng-click="redirectToAmbito()">Ambito</a></li>
                                </ul>
                            </div>
                            <div class="col-sm-8">

                                <div id="filtri_areageografica" role="form" ng-if="isAreaGeografica();">
                                    <select id="regione" name="regione">
                                        <option value="" selected>Seleziona</option>
                                        <option value='abruzzo'>Abruzzo</option>
                                        <option value='basilicata'>Basilicata</option>
                                        <option value='calabria'>Calabria</option>
                                        <option value='campania'>Campania</option>
                                        <option value='emilia romagna'>Emilia Romagna</option>
                                        <option value='friuli venezia giulia'>Friuli-Venezia Giulia</option>
                                        <option value='lazio'>Lazio</option>
                                        <option value='liguria'>Liguria</option>
                                        <option value='lombardia'>Lombardia</option>
                                        <option value='marche'>Marche</option>
                                        <option value='molise'>Molise</option>
                                        <option value='piemonte'>Piemonte</option>
                                        <option value='puglia'>Puglia</option>
                                        <option value='sardegna'>Sardegna</option>
                                        <option value='sicilia'>Sicilia</option>
                                        <option value='toscana'>Toscana</option>
                                        <option value='trentino alto adige'>Trentino Alto Adige</option>
                                        <option value='umbria'>Umbria</option>
                                        <option value='valle d aosta'>Valle D'Aosta</option>
                                        <option value='veneto'>Veneto</option>
                                    </select>
                                    <select id="provincia" name="provincia">
                                        <option value="" selected>Seleziona</option>
                                        <option value="AG">Agrigento</option>
                                        <option value="AL">Alessandria</option>
                                        <option value="AN">Ancona</option>
                                        <option value="AO">Aosta</option>
                                        <option value="AR">Arezzo</option>
                                        <option value="AP">Ascoli Piceno</option>
                                        <option value="AT">Asti</option>
                                        <option value="AV">Avellino</option>
                                        <option value="BA">Bari</option>
                                        <option value="BL">Belluno</option>
                                        <option value="BN">Benevento</option>
                                        <option value="BG">Bergamo</option>
                                        <option value="BI">Biella</option>
                                        <option value="BO">Bologna</option>
                                        <option value="BZ">Bolzano</option>
                                        <option value="BS">Brescia</option>
                                        <option value="BR">Brindisi</option>
                                        <option value="CA">Cagliari</option>
                                        <option value="CL">Caltanissetta</option>
                                        <option value="CB">Campobasso</option>
                                        <option value="CE">Caserta</option>
                                        <option value="CT">Catania</option>
                                        <option value="CZ">Catanzaro</option>
                                        <option value="CH">Chieti</option>
                                        <option value="CO">Como</option>
                                        <option value="CS">Cosenza</option>
                                        <option value="CR">Cremona</option>
                                        <option value="KR">Crotone</option>
                                        <option value="CN">Cuneo</option>
                                        <option value="EN">Enna</option>
                                        <option value="FE">Ferrara</option>
                                        <option value="FI">Firenze</option>
                                        <option value="FG">Foggia</option>
                                        <option value="FO">Forl&igrave; - Cesena</option>
                                        <option value="FR">Frosinone</option>
                                        <option value="GE">Genova</option>
                                        <option value="GO">Gorizia</option>
                                        <option value="GR">Grosseto</option>
                                        <option value="IM">Imperia</option>
                                        <option value="IS">Isernia</option>
                                        <option value="SP">La Spezia</option>
                                        <option value="AQ">L'Aquila</option>
                                        <option value="LT">Latina</option>
                                        <option value="LE">Lecce</option>
                                        <option value="LC">Lecco</option>
                                        <option value="LI">Livorno</option>
                                        <option value="LO">Lodi</option>
                                        <option value="LU">Lucca</option>
                                        <option value="MC">Macerata</option>
                                        <option value="MN">Mantova</option>
                                        <option value="MS">Massa Carrara</option>
                                        <option value="MT">Matera</option>
                                        <option value="ME">Messina</option>
                                        <option value="MI">Milano</option>
                                        <option value="MO">Modena</option>
                                        <option value="NA">Napoli</option>
                                        <option value="NO">Novara</option>
                                        <option value="NU">Nuoro</option>
                                        <option value="OR">Oristano</option>
                                        <option value="PD">Padova</option>
                                        <option value="PA">Palermo</option>
                                        <option value="PR">Parma</option>
                                        <option value="PV">Pavia</option>
                                        <option value="PG">Perugia</option>
                                        <option value="PS">Pesaro</option>
                                        <option value="PE">Pescara</option>
                                        <option value="PC">Piacenza</option>
                                        <option value="PI">Pisa</option>
                                        <option value="PT">Pistoia</option>
                                        <option value="PN">Pordenone</option>
                                        <option value="PZ">Potenza</option>
                                        <option value="PO">Prato</option>
                                        <option value="RG">Ragusa</option>
                                        <option value="RA">Ravenna</option>
                                        <option value="RC">Reggio Calabria</option>
                                        <option value="RE">Reggio Emilia</option>
                                        <option value="RI">Rieti</option>
                                        <option value="RN">Rimini</option>
                                        <option value="RM">Roma</option>
                                        <option value="RO">Rovigo</option>
                                        <option value="SA">Salerno</option>
                                        <option value="SS">Sassari</option>
                                        <option value="SV">Savona</option>
                                        <option value="SI">Siena</option>
                                        <option value="SR">Siracusa</option>
                                        <option value="SO">Sondrio</option>
                                        <option value="TA">Taranto</option>
                                        <option value="TE">Teramo</option>
                                        <option value="TR">Terni</option>
                                        <option value="TO">Torino</option>
                                        <option value="TP">Trapani</option>
                                        <option value="TN">Trento</option>
                                        <option value="TV">Treviso</option>
                                        <option value="TS">Trieste</option>
                                        <option value="UD">Udine</option>
                                        <option value="VA">Varese</option>
                                        <option value="VE">Venezia</option>
                                        <option value="VB">Verbania-Cusio-Ossola</option>
                                        <option value="VC">Vercelli</option>
                                        <option value="VR">Verona</option>
                                        <option value="VV">Vibo Valentia</option>
                                        <option value="VI">Vicenza</option>
                                        <option value="VT">Viterbo</option>
                                    </select>
                                </div>
                                <div id="filtri_ambito" role="form" ng-if="isAmbito();">
                                    <label class="checkbox-inline">
                                        <input type="checkbox" value="">Recitazione
                                    </label>

                                    <label class="checkbox-inline">
                                        <input type="checkbox" value="">Canto
                                    </label>

                                    <label class="checkbox-inline">
                                        <input type="checkbox" value="">Danza
                                    </label>
                                    <br/>
                                    <br/>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" value="">Trasformismo
                                    </label>
                                    <label class="checkbox-inline">
                                        <input type="checkbox" value="">illusionismo
                                    </label>


                                    <p></p>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-primary">Save changes</button>
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>

                </div>
            </div>
        </div>
    </div>
</form>


<div class="row profile">
    <div class="col-md-1">
    </div>
    <div class="col-md-2">
        <div class="profile-sidebar">
            <!-- SIDEBAR USERPIC -->
            <div class="profile-photo">
                <a href="#!/profiloView/{{userId}}">
                    <img class="media-object img-responsive" ng-src="{{datoProfilo.imgPath}}"
                         alt="Immagine profilo di {{datoProfilo.nome}}"
                         ng-if="datoProfilo.imgPath.includes('https://firebasestorage.googleapis.com')"
                         href="#!/profiloView/{{userId}}">

                </a>
            </div>
            <!-- END SIDEBAR USERPIC -->
            <!-- SIDEBAR USER TITLE -->
            <div class="profile-usertitle">
                <div class="profile-usertitle-name">
                    Ciao, {{datoProfilo.nome}}!
                </div>
            </div>
            <div class="form-group" ng-show="datoProfilo.tipo == 'performer/organizzatore'">
                <button id="crea" class="btn btn-custom center-block" data-target="#ModalCreate" data-toggle="modal">
                    Crea evento
                </button>
            </div>
        </div>
        <img class="foto_bacheca" src="images_stagee/pins_OK.png">
    </div>

    <div class="col-md-6">
        <div map-lazy-load="https://maps.google.com/maps/api/js" map-lazy-load-params="{{googleMapsUrl}}">
            <ng-map center="45.065698, 7.670945" zoom="14" disable-default-u-i="true">

                <marker ng-repeat="evento in EventiSpettacolo track by $index"
                        position="{{evento.eventi.address}}"
                        optimized="false"
                        icon="{
                url:'images_stagee/pin_verde.png',
                scaledSize:[40,40],
                origin: [0,0],
                anchor: [50,50]
                      }"

                        on-click="showTag(event, evento.eventi)"
                >

                    <info-window id="myInfoWindow3" max-width="300">
                        <div ng-non-bindable>
                            <div id="siteNotice3"></div>

                            <a href="#!/eventoView/{{selectedTag.eventoId}}">
                                <b>{{selectedTag.nome_evento}}</b>
                            </a>
                            <p>{{selectedTag.nome_organizzatore}}</p>
                            <p>{{selectedTag.data}}</p>
                        </div>
                    </info-window>
                </marker>

                <marker ng-repeat="evento in EventiMasterclass track by $index"
                        position="{{evento.eventi.address}}"
                        optimized="false"
                        icon="{
                url:'images_stagee/pin_blu.png',
                scaledSize:[40,40],
                origin: [0,0],
                anchor: [50,50]
                      }"

                        on-click="showTag(event, evento.eventi)"
                >

                    <info-window id="myInfoWindow" max-width="300">
                        <div ng-non-bindable>
                            <div id="siteNotice"></div>

                            <a href="#!/eventoView/{{selectedTag.eventoId}}">
                                <b>{{selectedTag.nome_evento}}</b>
                            </a>

                            <p>{{selectedTag.nome_organizzatore}}</p>
                            <p>{{selectedTag.data}}</p>

                        </div>
                    </info-window>
                </marker>
                <marker ng-repeat="evento in EventiCasting track by $index"
                        position="{{evento.eventi.address}}"
                        optimized="false"
                        icon="{
                url:'images_stagee/pin-rosso.png',
                scaledSize:[40,40],
                origin: [0,0],
                anchor: [50,50]
                      }"

                        on-click="showTag(event, evento.eventi)"
                >

                    <info-window id="myInfoWindow4" max-width="300">
                        <div ng-non-bindable>
                            <div id="siteNotice4"></div>

                            <a href="#!/eventoView/{{selectedTag.eventoId}}">
                                <b>{{selectedTag.nome_evento}}</b>
                            </a>

                            <p>{{selectedTag.nome_organizzatore}}</p>
                            <p>{{selectedTag.data}}</p>

                        </div>
                    </info-window>
                </marker>

                <marker ng-repeat="evento in EventiWorkshop track by $index"
                        position="{{evento.eventi.address}}"
                        optimized="false"
                        icon="{
                url:'images_stagee/pin_giallo.png',
                scaledSize:[40,40],
                origin: [0,0],
                anchor: [50,50]
                      }"

                        on-click="showTag(event, evento.eventi)"
                >

                    <info-window id="myInfoWindow2" max-width="300">
                        <div ng-non-bindable>
                            <div id="siteNotice2"></div>

                            <a href="#!/eventoView/{{selectedTag.eventoId}}">
                                <b>{{selectedTag.nome_evento}}</b>
                            </a>

                            <p>{{selectedTag.nome_organizzatore}}</p>
                            <p>{{selectedTag.data}}</p>

                        </div>
                    </info-window>
                </marker >

            </ng-map>
        </div>
        <br>
        <br>
        <img class="foto_bacheca" src="images_stagee/bacheca_OK.png">
    </div>
    <div class="col-md-2">
        <img class="foto_bacheca" src="images_stagee/classifiche_OK.png">
    </div>
    <div class="col-md-1">
    </div>

    <div class="modal fade text-center" id="ModalCreate">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Crea il tuo evento!</h2>
                </div>


                <div ng-controller="CreaEventoCtrl as $ctrl">

                    <form id="frmLogin" role="form" ng-submit="registraEvento()" class="center-block">

                        <div class="modal-body" style="text-align: center">

                            <div class="form-group">
                                <label for="nome_evento">Titolo dell'evento</label>
                                <input type="text" class="form-control" id="nome_evento" name="nome_evento"
                                       ng-model="event.nome_evento" required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="data">Data dell'evento</label>
                                <input type="date" class="form-control" id="data"
                                       placeholder="Data dell'evento, formato DD/MM/YYYY" name="data"
                                       ng-model="event.data" required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="ora_inizio">Ora di inizio</label>
                                <input type="time" class="form-control" id="ora_inizio"
                                       placeholder="Ora di inizio, formato HH:MM" name="ora_inizio"
                                       ng-model="event.ora_inizio" required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="ora_fine">Ora di fine</label>
                                <input type="time" class="form-control" id="ora_fine"
                                       placeholder="Ora di fine, formato HH:MM" name="ora_fine"
                                       ng-model="event.ora_fine" required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="luogo">Luogo dell'evento</label>
                                <input type="text" class="form-control" id="luogo" name="address"
                                       ng-model="event.address" required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="costo">Costo di partecipazione (in Euro)</label>
                                <input type="text" class="form-control" id="costo" name="costo" ng-model="event.costo"
                                       required="required"/>
                            </div>
                            <div class="form-group">
                                <label for="descrizione">Descrizione dell'evento</label>
                                <textarea rows="4" cols="80" class="form-control" id="descrizione" name="descrizione"
                                          ng-model="event.descrizione" required="required">
                    </textarea>
                            </div>
                            <div class="form-group">
                                <label for="categoria">Tipo di evento</label>
                                <select class="form-control" id="categoria" placeholder="Categoria di evento"
                                        name="categoria" ng-model="event.categoria" required="required">
                                    <option>Masterclass</option>
                                    <option>Workshop</option>
                                    <option>Casting</option>
                                    <option>Spettacolo</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="partecipazione">Tipo di partecipazione</label>
                                <select class="form-control" id="partecipazione" name="partecipazione"
                                        ng-model="event.partecipazione" required="required">
                                    <option>Aperto a tutti</option>
                                    <option>Su invito</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <p>Aggiungi un'immagine cover per il tuo evento!</p>
                                <file-upload on-change="$ctrl.onChange">
                                </file-upload>
                            </div>

                        </div>

                        <div class="modal-footer">

                            <button type="submit" class="btn btn-custom center-block">Crea l'evento</button>
                            <button type="button" class="btn btn-custom right-block" data-dismiss="modal">Annulla
                            </button>
                        </div>

                    </form>

                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="confermaEvento">
        <div class="modal-dialog" role="document">

            <!-- Modal content-->
            <div align="center" class="modal-content" class="col-xs-8">
                <div class="modal-header">
                    <p class="modal-title">
                    <h2 text-align="center">Evento creato con successo!</h2>
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning right-block" data-dismiss="modal">Chiudi</button>
                </div>
            </div>
        </div>
    </div>
</div>

